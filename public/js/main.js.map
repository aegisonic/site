{"version":3,"sources":["file:///Users/matthewdillard/Documents/Projects/Aegisonic/site/assets/js/lightbox.js"],"sourcesContent":["/* Credit: HugoCodex (https://github.com/jhvanderschee/hugocodex) */\n\nfunction is_youtubelink(url) {\n    var p = /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+\u0026v=))((\\w|-){11})(?:\\S+)?$/;\n    return (url.match(p)) ? RegExp.$1 : false;\n}\nfunction is_imagelink(url) {\n    var p = /([a-z\\-_0-9\\/\\:\\.]*\\.(jpg|jpeg|png|gif))/i;\n    return (url.match(p)) ? true : false;\n}\nfunction is_vimeolink(url,el) {\n    var id = false;\n    var xmlhttp = new XMLHttpRequest();\n    xmlhttp.onreadystatechange = function() {\n        if (xmlhttp.readyState == XMLHttpRequest.DONE) {   // XMLHttpRequest.DONE == 4\n            if (xmlhttp.status == 200) {\n                var response = JSON.parse(xmlhttp.responseText);\n                id = response.video_id;\n                console.log(id);\n                el.classList.add('lightbox-vimeo');\n                el.setAttribute('data-id',id);\n\n                el.addEventListener(\"click\", function(event) {\n                    event.preventDefault();\n                    document.getElementById('lightbox').innerHTML = '\u003ca id=\"close\"\u003e\u003c/a\u003e\u003ca id=\"next\"\u003e\u0026rsaquo;\u003c/a\u003e\u003ca id=\"prev\"\u003e\u0026lsaquo;\u003c/a\u003e\u003cdiv class=\"videoWrapperContainer\"\u003e\u003cdiv class=\"videoWrapper\"\u003e\u003ciframe src=\"https://player.vimeo.com/video/'+el.getAttribute('data-id')+'/?autoplay=1\u0026byline=0\u0026title=0\u0026portrait=0\" webkitallowfullscreen mozallowfullscreen allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e';\n                    document.getElementById('lightbox').style.display = 'block';\n\n                    setGallery(this);\n                });\n            }\n            else if (xmlhttp.status == 400) {\n                alert('There was an error 400');\n            }\n            else {\n                alert('something else other than 200 was returned');\n            }\n        }\n    };\n    xmlhttp.open(\"GET\", 'https://vimeo.com/api/oembed.json?url='+url, true);\n    xmlhttp.send();\n}\nfunction setGallery(el) {\n    var elements = document.body.querySelectorAll(\".gallery\");\n    elements.forEach(element =\u003e {\n        element.classList.remove('gallery');\n\t});\n\tif(el.closest('ul, p')) {\n\t\tvar link_elements = el.closest('ul, p').querySelectorAll(\"a[class*='lightbox-']\");\n\t\tlink_elements.forEach(link_element =\u003e {\n\t\t\tlink_element.classList.remove('current');\n\t\t});\n\t\tlink_elements.forEach(link_element =\u003e {\n\t\t\tif(el.getAttribute('href') == link_element.getAttribute('href')) {\n\t\t\t\tlink_element.classList.add('current');\n\t\t\t}\n\t\t});\n\t\tif(link_elements.length\u003e1) {\n\t\t\tdocument.getElementById('lightbox').classList.add('gallery');\n\t\t\tlink_elements.forEach(link_element =\u003e {\n\t\t\t\tlink_element.classList.add('gallery');\n\t\t\t});\n\t\t}\n\t\tvar currentkey;\n\t\tvar gallery_elements = document.querySelectorAll('a.gallery');\n\t\tObject.keys(gallery_elements).forEach(function (k) {\n\t\t\tif(gallery_elements[k].classList.contains('current')) currentkey = k;\n\t\t});\n\t\tif(currentkey==(gallery_elements.length-1)) var nextkey = 0;\n\t\telse var nextkey = parseInt(currentkey)+1;\n\t\tif(currentkey==0) var prevkey = parseInt(gallery_elements.length-1);\n\t\telse var prevkey = parseInt(currentkey)-1;\n\t\tdocument.getElementById('next').addEventListener(\"click\", function() {\n\t\t\tgallery_elements[nextkey].click();\n\t\t});\n\t\tdocument.getElementById('prev').addEventListener(\"click\", function() {\n\t\t\tgallery_elements[prevkey].click();\n\t\t});\n\t}\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n\n    //create lightbox div in the footer\n    var newdiv = document.createElement(\"div\");\n    newdiv.setAttribute('id',\"lightbox\");\n    document.body.appendChild(newdiv);\n\n    //add classes to links to be able to initiate lightboxes\n    var elements = document.querySelectorAll('a');\n    elements.forEach(element =\u003e {\n        var url = element.getAttribute('href');\n        if(url) {\n            if(url.indexOf('vimeo') !== -1 \u0026\u0026 !element.classList.contains('no-lightbox')) {\n                is_vimeolink(url,element);\n            }\n            if(is_youtubelink(url) \u0026\u0026 !element.classList.contains('no-lightbox')) {\n                element.classList.add('lightbox-youtube');\n                element.setAttribute('data-id',is_youtubelink(url));\n            }\n            if(is_imagelink(url) \u0026\u0026 !element.classList.contains('no-lightbox')) {\n                element.classList.add('lightbox-image');\n                var href = element.getAttribute('href');\n                var filename = href.split('/').pop();\n                var split = filename.split(\".\");\n                var name = split[0];\n                element.setAttribute('title',name);\n            }\n        }\n    });\n\n    //remove the clicked lightbox\n    document.getElementById('lightbox').addEventListener(\"click\", function(event) {\n        if(event.target.id != 'next' \u0026\u0026 event.target.id != 'prev'){\n            this.innerHTML = '';\n            document.getElementById('lightbox').style.display = 'none';\n        }\n    });\n    \n    //add the youtube lightbox on click\n    var elements = document.querySelectorAll('a.lightbox-youtube');\n    elements.forEach(element =\u003e {\n        element.addEventListener(\"click\", function(event) {\n            event.preventDefault();\n            document.getElementById('lightbox').innerHTML = '\u003ca id=\"close\"\u003e\u003c/a\u003e\u003ca id=\"next\"\u003e\u0026rsaquo;\u003c/a\u003e\u003ca id=\"prev\"\u003e\u0026lsaquo;\u003c/a\u003e\u003cdiv class=\"videoWrapperContainer\"\u003e\u003cdiv class=\"videoWrapper\"\u003e\u003ciframe src=\"https://www.youtube.com/embed/'+this.getAttribute('data-id')+'?autoplay=1\u0026showinfo=0\u0026rel=0\"\u003e\u003c/iframe\u003e\u003c/div\u003e';\n            document.getElementById('lightbox').style.display = 'block';\n\n            setGallery(this);\n        });\n    });\n\n    //add the image lightbox on click\n    var elements = document.querySelectorAll('a.lightbox-image');\n    elements.forEach(element =\u003e {\n        element.addEventListener(\"click\", function(event) {\n            event.preventDefault();\n            document.getElementById('lightbox').innerHTML = '\u003ca id=\"close\"\u003e\u003c/a\u003e\u003ca id=\"next\"\u003e\u0026rsaquo;\u003c/a\u003e\u003ca id=\"prev\"\u003e\u0026lsaquo;\u003c/a\u003e\u003cdiv class=\"img\" style=\"background: url(\\''+this.getAttribute('href')+'\\') center center / contain no-repeat;\" title=\"'+this.getAttribute('title')+'\" \u003e\u003cimg src=\"'+this.getAttribute('href')+'\" alt=\"'+this.getAttribute('title')+'\" /\u003e\u003c/div\u003e\u003cspan\u003e'+this.getAttribute('title')+'\u003c/span\u003e';\n            document.getElementById('lightbox').style.display = 'block';\n\n            setGallery(this);\n        });\n    });\n\n});"],"mappings":"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","names":[]}